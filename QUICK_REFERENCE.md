# ðŸš€ Quick Reference - opti_proj.sh v2.0

## Common Commands

```bash
# Basic usage
./opti_proj.sh                    # Run on current directory
./opti_proj.sh /path/to/project   # Run on specific project

# Preview before running
./opti_proj.sh --dry-run .

# Get help
./opti_proj.sh --help

# Skip steps (1=Review, 2=Refactor, 3=Optimize, 4=Docs, 5=Test)
./opti_proj.sh --skip 2,3 .       # Skip refactor & optimize

# Resume from failed step
./opti_proj.sh --resume 3 .       # Resume from step 3

# Verbose output
./opti_proj.sh -v .

# Custom timeout (default: 3600s)
./opti_proj.sh --timeout 7200 .   # 2 hours

# Combine options
./opti_proj.sh -v -s 4 -t 1800 /path/to/project
```

## Configuration

### Method 1: Environment Variables
```bash
export CLAUDE_MODEL="claude-opus-4"
export CLAUDE_WORKFLOW_CONFIG="/path/to/config"
./opti_proj.sh .
```

### Method 2: Config File
```bash
# Create config in project
cat > .claude-workflow.conf << 'END'
MODEL="claude-sonnet-4-5-20250929"
MAX_RETRIES=3
TIMEOUT=7200
VERBOSE=true
END

./opti_proj.sh .
```

### Method 3: Command Line
```bash
./opti_proj.sh -m claude-opus-4 -t 7200 -v .
```

## Workflow Steps

| # | Step | Output |
|---|------|--------|
| 1 | Code Review | `REVIEW_REPORT.md` |
| 2 | Refactoring | `REFACTOR_CHANGELOG.md` |
| 3 | Optimization | `PERFORMANCE_REPORT.md` |
| 4 | Documentation | `README.md`, `ARCHITECTURE.md`, etc. |
| 5 | Testing | `TEST_REPORT.md` |

## Troubleshooting

```bash
# Check dependencies
command -v claude || npm install -g @anthropics/claude-cli

# View detailed logs
cat .claude-workflow-logs/workflow_*.log

# View errors only
cat .claude-workflow-logs/errors_*.log

# Find last checkpoint
cat .claude-workflow-logs/.checkpoint

# Resume from checkpoint
./opti_proj.sh --resume $(cat .claude-workflow-logs/.checkpoint) .
```

## Flags Reference

```
-h, --help              Show help message
-d, --dry-run           Preview without executing
-s, --skip STEP         Skip step(s) (1-5, comma-separated)
-r, --resume STEP       Resume from step
-v, --verbose           Enable verbose output
-m, --model MODEL       Specify Claude model
-t, --timeout SECONDS   Set timeout per step
-c, --config FILE       Use custom config file
```

## Output Files

### Generated by Workflow
- `REVIEW_REPORT.md` - Code review
- `REFACTOR_CHANGELOG.md` - Changes made
- `PERFORMANCE_REPORT.md` - Optimizations
- `README.md` - Documentation
- `ARCHITECTURE.md` - System design
- `API_DOCUMENTATION.md` - API docs
- `CONTRIBUTING.md` - Contribution guide
- `TEST_REPORT.md` - Test results

### Logs Directory
`.claude-workflow-logs/`
- `workflow_TIMESTAMP.log` - Main log
- `errors_TIMESTAMP.log` - Errors only
- `01_review_TIMESTAMP.log` - Step 1 details
- `02_refactor_TIMESTAMP.log` - Step 2 details
- `03_optimize_TIMESTAMP.log` - Step 3 details
- `04_documentation_TIMESTAMP.log` - Step 4 details
- `05_testing_TIMESTAMP.log` - Step 5 details
- `.checkpoint` - Last successful step

## Examples

### Skip Documentation & Testing
```bash
./opti_proj.sh --skip 4,5 /path/to/project
```

### Only Run Code Review
```bash
./opti_proj.sh --skip 2,3,4,5 /path/to/project
```

### Large Project (3 hour timeout)
```bash
./opti_proj.sh --timeout 10800 --verbose /path/to/large/project
```

### Test Configuration First
```bash
./opti_proj.sh --dry-run --verbose /path/to/project
```

### Resume After Network Issue
```bash
# Check last successful step
cat .claude-workflow-logs/.checkpoint

# Resume from next step
./opti_proj.sh --resume 4 /path/to/project
```

## Exit Codes

- `0` - Success
- `1` - Error (check logs)
- `124` - Timeout (increase with --timeout)

## Tips

1. **Always commit first**: The workflow modifies files
2. **Start with dry-run**: Preview changes
3. **Use verbose for debugging**: `./opti_proj.sh -v .`
4. **Check logs**: Review `.claude-workflow-logs/` directory
5. **Increase timeout for large projects**: `--timeout 7200`
6. **Skip steps you don't need**: Save time with `--skip`
7. **Use config files**: Standardize across team
8. **Resume on failure**: Don't start from scratch

## Quick Aliases (Optional)

Add to your `.bashrc` or `.zshrc`:

```bash
alias cwf='~/path/to/opti_proj.sh'
alias cwf-dry='~/path/to/opti_proj.sh --dry-run'
alias cwf-review='~/path/to/opti_proj.sh --skip 2,3,4,5'
alias cwf-docs='~/path/to/opti_proj.sh --skip 1,2,3,5'
alias cwf-test='~/path/to/opti_proj.sh --skip 1,2,3,4'
```

Then use:
```bash
cwf /path/to/project
cwf-dry .
cwf-review .
```

---

**Version**: 2.0  
**Updated**: 2024  
For full documentation, see `WORKFLOW_README.md`
